{"ast":null,"code":"var _jsxFileName = \"/home/qiu/code/Github-hotspot/github-viz-app/src/pages/LanguageDistribution.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport API from '../config/api';\n\n// 根据语言名称生成颜色\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst getLanguageColor = language => {\n  const colorMap = {\n    JavaScript: '#f1e05a',\n    TypeScript: '#2b7489',\n    Python: '#3572A5',\n    Java: '#b07219',\n    Go: '#00ADD8',\n    'C++': '#f34b7d',\n    Ruby: '#701516',\n    PHP: '#4F5D95',\n    Rust: '#dea584',\n    'C#': '#178600',\n    Swift: '#ffac45',\n    Kotlin: '#F18E33'\n  };\n  return colorMap[language] || `hsl(${Math.abs(language.split('').reduce((acc, char) => acc + char.charCodeAt(0), 0)) % 360}, 70%, 60%)`;\n};\nconst LanguageDistribution = () => {\n  _s();\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        setLoading(true);\n        const response = await fetch(API.languageDistribution);\n        if (!response.ok) {\n          throw new Error(`HTTP error! Status: ${response.status}`);\n        }\n        const result = await response.json();\n        setData(result);\n      } catch (err) {\n        setError(`获取数据失败: ${err.message}`);\n        console.error(err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchData();\n  }, []);\n\n  // 显示加载状态\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-container\",\n      children: \"\\u6B63\\u5728\\u52A0\\u8F7D\\u8BED\\u8A00\\u5206\\u5E03\\u6570\\u636E...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 16\n    }, this);\n  }\n\n  // 显示错误\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-container\",\n      children: [\"\\u9519\\u8BEF: \", error]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 16\n    }, this);\n  }\n\n  // 确保数据存在且非空\n  if (!data || data.length === 0) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"empty-data\",\n      children: \"\\u6CA1\\u6709\\u627E\\u5230\\u8BED\\u8A00\\u5206\\u5E03\\u6570\\u636E\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 16\n    }, this);\n  }\n\n  // 计算总数和最大值，用于百分比计算\n  const totalCount = data.reduce((sum, item) => sum + item.count, 0);\n  const maxCount = Math.max(...data.map(item => item.count));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"language-distribution-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\u7F16\\u7A0B\\u8BED\\u8A00\\u5206\\u5E03\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"horizontal-bars-container\",\n      children: data.map((item, index) => {\n        const percentage = (item.count / totalCount * 100).toFixed(1);\n        const barWidth = (item.count / maxCount * 100).toFixed(1) + '%';\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"language-bar-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"language-name\",\n            children: item.language\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bar-container\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"language-bar\",\n              style: {\n                width: barWidth,\n                backgroundColor: getLanguageColor(item.language)\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"language-count\",\n            children: [item.count.toLocaleString(), \" (\", percentage, \"%)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 29\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 25\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 9\n  }, this);\n};\n_s(LanguageDistribution, \"C4fiAW6C7RZgaKDoEXQgZpbuUZg=\");\n_c = LanguageDistribution;\nexport default LanguageDistribution;\nvar _c;\n$RefreshReg$(_c, \"LanguageDistribution\");","map":{"version":3,"names":["React","useState","useEffect","API","jsxDEV","_jsxDEV","getLanguageColor","language","colorMap","JavaScript","TypeScript","Python","Java","Go","Ruby","PHP","Rust","Swift","Kotlin","Math","abs","split","reduce","acc","char","charCodeAt","LanguageDistribution","_s","data","setData","loading","setLoading","error","setError","fetchData","response","fetch","languageDistribution","ok","Error","status","result","json","err","message","console","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","totalCount","sum","item","count","maxCount","max","map","index","percentage","toFixed","barWidth","style","width","backgroundColor","toLocaleString","_c","$RefreshReg$"],"sources":["/home/qiu/code/Github-hotspot/github-viz-app/src/pages/LanguageDistribution.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport API from '../config/api';\n\n// 根据语言名称生成颜色\nconst getLanguageColor = (language) => {\n    const colorMap = {\n        JavaScript: '#f1e05a',\n        TypeScript: '#2b7489',\n        Python: '#3572A5',\n        Java: '#b07219',\n        Go: '#00ADD8',\n        'C++': '#f34b7d',\n        Ruby: '#701516',\n        PHP: '#4F5D95',\n        Rust: '#dea584',\n        'C#': '#178600',\n        Swift: '#ffac45',\n        Kotlin: '#F18E33'\n    };\n\n    return colorMap[language] ||\n        `hsl(${Math.abs(language.split('').reduce((acc, char) => acc + char.charCodeAt(0), 0)) % 360}, 70%, 60%)`;\n};\n\nconst LanguageDistribution = () => {\n    const [data, setData] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n\n    useEffect(() => {\n        const fetchData = async () => {\n            try {\n                setLoading(true);\n                const response = await fetch(API.languageDistribution);\n                if (!response.ok) {\n                    throw new Error(`HTTP error! Status: ${response.status}`);\n                }\n                const result = await response.json();\n                setData(result);\n            } catch (err) {\n                setError(`获取数据失败: ${err.message}`);\n                console.error(err);\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        fetchData();\n    }, []);\n\n    // 显示加载状态\n    if (loading) {\n        return <div className=\"loading-container\">正在加载语言分布数据...</div>;\n    }\n\n    // 显示错误\n    if (error) {\n        return <div className=\"error-container\">错误: {error}</div>;\n    }\n\n    // 确保数据存在且非空\n    if (!data || data.length === 0) {\n        return <div className=\"empty-data\">没有找到语言分布数据</div>;\n    }\n\n    // 计算总数和最大值，用于百分比计算\n    const totalCount = data.reduce((sum, item) => sum + item.count, 0);\n    const maxCount = Math.max(...data.map(item => item.count));\n\n    return (\n        <div className=\"language-distribution-container\">\n            <h2>编程语言分布</h2>\n            <div className=\"horizontal-bars-container\">\n                {data.map((item, index) => {\n                    const percentage = (item.count / totalCount * 100).toFixed(1);\n                    const barWidth = (item.count / maxCount * 100).toFixed(1) + '%';\n\n                    return (\n                        <div key={index} className=\"language-bar-item\">\n                            <div className=\"language-name\">{item.language}</div>\n                            <div className=\"bar-container\">\n                                <div\n                                    className=\"language-bar\"\n                                    style={{\n                                        width: barWidth,\n                                        backgroundColor: getLanguageColor(item.language)\n                                    }}\n                                />\n                            </div>\n                            <div className=\"language-count\">\n                                {item.count.toLocaleString()} ({percentage}%)\n                            </div>\n                        </div>\n                    );\n                })}\n            </div>\n        </div>\n    );\n};\n\nexport default LanguageDistribution; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}