{"ast":null,"code":"var _jsxFileName = \"/home/qiu/code/Github-hotspot/github-viz-app/src/pages/TopRepositories.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect, useMemo } from 'react';\nimport API from '../config/api';\n\n// 根据语言名称生成颜色\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst getLanguageColor = language => {\n  const colorMap = {\n    JavaScript: '#f1e05a',\n    TypeScript: '#2b7489',\n    Python: '#3572A5',\n    Java: '#b07219',\n    Go: '#00ADD8',\n    'C++': '#f34b7d',\n    Ruby: '#701516',\n    Dart: '#00B4AB',\n    PHP: '#4F5D95',\n    Rust: '#dea584',\n    'C#': '#178600',\n    Swift: '#ffac45',\n    Kotlin: '#F18E33'\n  };\n  return colorMap[language] || `hsl(${Math.abs(language.split('').reduce((acc, char) => acc + char.charCodeAt(0), 0)) % 360}, 70%, 60%)`;\n};\n\n// 模拟数据，当API不可用时使用\nconst mockData = [{\n  repo_id: 1,\n  name: 'react',\n  description: '用于构建用户界面的JavaScript库',\n  stars: 182000,\n  forks: 35800,\n  language: 'JavaScript',\n  owner: 'facebook',\n  stars_month_ago: 180000\n}, {\n  repo_id: 2,\n  name: 'vue',\n  description: '渐进式JavaScript框架',\n  stars: 153000,\n  forks: 29500,\n  language: 'JavaScript',\n  owner: 'vuejs',\n  stars_month_ago: 151000\n}, {\n  repo_id: 3,\n  name: 'tensorflow',\n  description: '机器学习框架',\n  stars: 147000,\n  forks: 83600,\n  language: 'Python',\n  owner: 'tensorflow',\n  stars_month_ago: 146000\n}, {\n  repo_id: 4,\n  name: 'flutter',\n  description: 'Google的UI工具包，用于从单一代码库构建移动、Web和桌面应用',\n  stars: 139000,\n  forks: 21700,\n  language: 'Dart',\n  owner: 'flutter',\n  stars_month_ago: 137000\n}, {\n  repo_id: 5,\n  name: 'vscode',\n  description: 'Visual Studio Code',\n  stars: 132000,\n  forks: 23800,\n  language: 'TypeScript',\n  owner: 'microsoft',\n  stars_month_ago: 130000\n}, {\n  repo_id: 6,\n  name: 'kubernetes',\n  description: '容器编排系统',\n  stars: 126000,\n  forks: 45900,\n  language: 'Go',\n  owner: 'kubernetes',\n  stars_month_ago: 125000\n}];\nconst TopRepositories = () => {\n  _s();\n  const [repositories, setRepositories] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [sortBy, setSortBy] = useState('stars');\n  const [filter, setFilter] = useState('');\n  const [selectedLanguage, setSelectedLanguage] = useState('');\n  const [hoveredRepo, setHoveredRepo] = useState(null);\n  const [isUsingMockData, setIsUsingMockData] = useState(false);\n  useEffect(() => {\n    async function fetchData() {\n      try {\n        setLoading(true);\n        const response = await fetch(API.topRepositories);\n        if (!response.ok) throw new Error('获取数据失败');\n        const result = await response.json();\n        //console.log('API Result:', result);//打印API结果\n        setRepositories(result);\n        setIsUsingMockData(false);\n      } catch (err) {\n        console.error('获取最受欢迎仓库数据出错:', err);\n        // 使用模拟数据作为后备\n        setRepositories(mockData);\n        setIsUsingMockData(true);\n        setError(null); // 清除错误状态，因为我们使用了模拟数据\n      } finally {\n        setLoading(false);\n      }\n    }\n    fetchData();\n  }, []);\n\n  // 提取所有语言 (基于完整数据)\n  const availableLanguages = useMemo(() => {\n    const languages = new Set();\n    repositories.forEach(repo => {\n      if (repo.language) languages.add(repo.language);\n    });\n    return Array.from(languages).sort();\n  }, [repositories]);\n\n  // 计算七天内星标增长率 (需要更新以匹配后端更改)\n  const calculateGrowthRate = repo => {\n    // 使用后端返回的 'stars_7_days_ago' 字段\n    if (repo.stars_month_ago === null || repo.stars_month_ago === undefined || repo.stars_month_ago === 0) return 0; // 如果没有7天前数据或为0，则增长率为0\n    const growth = (repo.stars || 0) - repo.stars_month_ago;\n    // 避免除以零，如果7天前星标为0，增长率视为无限大或特殊值，这里简单处理为大幅增长或0\n    const baseStars = repo.stars_month_ago || 1; // 防止除以0\n    const rate = growth / baseStars * 100;\n    return rate.toFixed(1);\n  };\n\n  // 格式化数字\n  const formatNumber = num => {\n    if (num >= 1000000) {\n      return (num / 1000000).toFixed(1) + 'M';\n    } else if (num >= 1000) {\n      return (num / 1000).toFixed(1) + 'K';\n    }\n    return num ? num.toString() : '0';\n  };\n\n  // 步骤 1 & 2: 过滤（语言）和排序完整数据\n  const filteredSortedFullRepos = useMemo(() => {\n    let result = [...repositories];\n\n    // 按语言过滤\n    if (selectedLanguage) {\n      result = result.filter(repo => repo.language === selectedLanguage);\n    }\n\n    // 排序\n    return result.sort((a, b) => {\n      switch (sortBy) {\n        case 'stars':\n          return (b.stars || 0) - (a.stars || 0);\n        case 'forks':\n          return (b.forks || 0) - (a.forks || 0);\n        case 'recent_stars':\n          // 使用 7 天增长率排序\n          const growthA = calculateGrowthRate(a);\n          const growthB = calculateGrowthRate(b);\n          return growthB - growthA;\n        // 按增长率降序\n        default:\n          return (b.stars || 0) - (a.stars || 0);\n      }\n    });\n  }, [repositories, selectedLanguage, sortBy]); // 依赖项\n\n  // 步骤 3: 条件化搜索或切片\n  const displayedRepos = useMemo(() => {\n    const lowerFilter = filter.trim().toLowerCase(); // 获取搜索文本\n\n    // 如果没有搜索文本，应用语言和排序，然后取前30\n    if (!lowerFilter) {\n      return filteredSortedFullRepos.slice(0, 30);\n    }\n\n    // 如果有搜索文本，在已过滤排序的完整列表上执行搜索\n    const searchResults = filteredSortedFullRepos.filter(repo => repo.name.toLowerCase().includes(lowerFilter) || repo.description && repo.description.toLowerCase().includes(lowerFilter) ||\n    // 也可以搜索 owner\n    repo.owner && repo.owner.toLowerCase().includes(lowerFilter));\n\n    // 返回所有搜索结果\n    return searchResults;\n  }, [filteredSortedFullRepos, filter]); // 依赖项\n\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-text\",\n        children: \"\\u6B63\\u5728\\u52A0\\u8F7D\\u6700\\u53D7\\u6B22\\u8FCE\\u4ED3\\u5E93\\u6570\\u636E...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 13\n    }, this);\n  }\n  if (error && !isUsingMockData) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-container\",\n      children: [\"\\u9519\\u8BEF: \", error]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 16\n    }, this);\n  }\n  if (!repositories || repositories.length === 0) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"empty-data\",\n      children: \"\\u6CA1\\u6709\\u627E\\u5230\\u4ED3\\u5E93\\u6570\\u636E\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"top-repositories-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"page-title\",\n      children: \"\\u6700\\u53D7\\u6B22\\u8FCE\\u4ED3\\u5E93\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 13\n    }, this), isUsingMockData && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mock-data-notice\",\n      children: \"\\u6CE8\\u610F\\uFF1A\\u7531\\u4E8EAPI\\u4E0D\\u53EF\\u7528\\uFF0C\\u5F53\\u524D\\u663E\\u793A\\u7684\\u662F\\u6A21\\u62DF\\u6570\\u636E\\u3002\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"top-repos-filters\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"filter-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"sort-select\",\n          children: \"\\u6392\\u5E8F\\u65B9\\u5F0F:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          id: \"sort-select\",\n          value: sortBy,\n          onChange: e => setSortBy(e.target.value),\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"stars\",\n            children: \"\\u6309\\u661F\\u6807\\u6570\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"forks\",\n            children: \"\\u6309\\u5206\\u53C9\\u6570\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"recent_stars\",\n            children: \"\\u6309\\u6700\\u8FD1\\u589E\\u957F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"filter-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"language-select\",\n          children: \"\\u7F16\\u7A0B\\u8BED\\u8A00:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          id: \"language-select\",\n          value: selectedLanguage,\n          onChange: e => setSelectedLanguage(e.target.value),\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"\\u5168\\u90E8\\u8BED\\u8A00\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 25\n          }, this), availableLanguages.map(lang => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: lang,\n            children: lang\n          }, lang, false, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 29\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"filter-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"search-input\",\n          children: \"\\u641C\\u7D22:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"search-input\",\n          type: \"text\",\n          placeholder: \"\\u641C\\u7D22\\u4ED3\\u5E93\\u540D\\u3001\\u63CF\\u8FF0\\u6216\\u6240\\u6709\\u8005\",\n          value: filter,\n          onChange: e => setFilter(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"repositories-grid\",\n      children: [displayedRepos.length === 0 && !loading && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"empty-data\",\n        children: \"\\u6CA1\\u6709\\u5339\\u914D\\u5F53\\u524D\\u6761\\u4EF6\\u7684\\u4ED3\\u5E93\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 21\n      }, this), displayedRepos.map((repo, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `repository-card ${hoveredRepo === repo.repo_id ? 'hovered' : ''}`,\n        onMouseEnter: () => setHoveredRepo(repo.repo_id),\n        onMouseLeave: () => setHoveredRepo(null),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"repository-rank\",\n          children: index + 1\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"repository-header\",\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"repository-name\",\n            children: /*#__PURE__*/_jsxDEV(\"a\", {\n              href: repo.description || `https://github.com/${repo.url}/${repo.name}`,\n              target: \"_blank\",\n              rel: \"noopener noreferrer\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"repository-owner\",\n                children: [repo.url, \"/\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 289,\n                columnNumber: 37\n              }, this), repo.name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"repository-description\",\n          children: repo.owner\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"repository-meta\",\n          children: [repo.language && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"repository-language\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"language-color\",\n              style: {\n                backgroundColor: getLanguageColor(repo.language)\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 299,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"language-name\",\n              children: repo.language\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"repository-stats\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"repository-stars\",\n              children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                className: \"icon\",\n                viewBox: \"0 0 16 16\",\n                fill: \"currentColor\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M8 .25a.75.75 0 01.673.418l1.882 3.815 4.21.612a.75.75 0 01.416 1.279l-3.046 2.97.719 4.192a.75.75 0 01-1.088.791L8 12.347l-3.766 1.98a.75.75 0 01-1.088-.79l.72-4.194L.818 6.374a.75.75 0 01.416-1.28l4.21-.611L7.327.668A.75.75 0 018 .25z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 310,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 309,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                title: `${(repo.stars || 0).toLocaleString()} 个星标`,\n                children: formatNumber(repo.stars)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 312,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 308,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"repository-forks\",\n              children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                className: \"icon\",\n                viewBox: \"0 0 16 16\",\n                fill: \"currentColor\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M5 3.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm0 2.122a2.25 2.25 0 10-1.5 0v.878A2.25 2.25 0 005.75 8.5h1.5v2.128a2.251 2.251 0 101.5 0V8.5h1.5a2.25 2.25 0 002.25-2.25v-.878a2.25 2.25 0 10-1.5 0v.878a.75.75 0 01-.75.75h-4.5A.75.75 0 015 6.25v-.878zm3.75 7.378a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm3-8.75a.75.75 0 100-1.5.75.75 0 000 1.5z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 319,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 318,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                title: `${(repo.forks || 0).toLocaleString()} 个分叉`,\n                children: formatNumber(repo.forks)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 321,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 317,\n              columnNumber: 33\n            }, this), repo.stars_7_days_ago !== null && repo.stars_7_days_ago !== undefined && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `repository-growth ${calculateGrowthRate(repo) >= 0 ? 'positive' : 'negative'}`,\n              title: `过去7天星标增长 ${calculateGrowthRate(repo)}%`,\n              children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                className: \"icon\",\n                viewBox: \"0 0 16 16\",\n                fill: \"currentColor\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  fillRule: \"evenodd\",\n                  d: \"M8 12a.75.75 0 01-.75-.75V5.66L3.668 9.123a.75.75 0 11-1.036-1.086l5.25-5a.75.75 0 011.071 0l5.25 5a.75.75 0 11-1.036 1.086L8.75 5.66v5.59A.75.75 0 018 12z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 332,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 331,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [calculateGrowthRate(repo), \"%\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 334,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 327,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 25\n        }, this)]\n      }, repo.repo_id || index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 21\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 221,\n    columnNumber: 9\n  }, this);\n};\n_s(TopRepositories, \"H9rkXnl4XK6vGbssWYLeEKCnbDk=\");\n_c = TopRepositories;\nexport default TopRepositories;\nvar _c;\n$RefreshReg$(_c, \"TopRepositories\");","map":{"version":3,"names":["useState","useEffect","useMemo","API","jsxDEV","_jsxDEV","getLanguageColor","language","colorMap","JavaScript","TypeScript","Python","Java","Go","Ruby","Dart","PHP","Rust","Swift","Kotlin","Math","abs","split","reduce","acc","char","charCodeAt","mockData","repo_id","name","description","stars","forks","owner","stars_month_ago","TopRepositories","_s","repositories","setRepositories","loading","setLoading","error","setError","sortBy","setSortBy","filter","setFilter","selectedLanguage","setSelectedLanguage","hoveredRepo","setHoveredRepo","isUsingMockData","setIsUsingMockData","fetchData","response","fetch","topRepositories","ok","Error","result","json","err","console","availableLanguages","languages","Set","forEach","repo","add","Array","from","sort","calculateGrowthRate","undefined","growth","baseStars","rate","toFixed","formatNumber","num","toString","filteredSortedFullRepos","a","b","growthA","growthB","displayedRepos","lowerFilter","trim","toLowerCase","slice","searchResults","includes","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","htmlFor","id","value","onChange","e","target","map","lang","type","placeholder","index","onMouseEnter","onMouseLeave","href","url","rel","style","backgroundColor","viewBox","fill","d","title","toLocaleString","stars_7_days_ago","fillRule","_c","$RefreshReg$"],"sources":["/home/qiu/code/Github-hotspot/github-viz-app/src/pages/TopRepositories.jsx"],"sourcesContent":["import { useState, useEffect, useMemo } from 'react';\nimport API from '../config/api';\n\n// 根据语言名称生成颜色\nconst getLanguageColor = (language) => {\n    const colorMap = {\n        JavaScript: '#f1e05a',\n        TypeScript: '#2b7489',\n        Python: '#3572A5',\n        Java: '#b07219',\n        Go: '#00ADD8',\n        'C++': '#f34b7d',\n        Ruby: '#701516',\n        Dart: '#00B4AB',\n        PHP: '#4F5D95',\n        Rust: '#dea584',\n        'C#': '#178600',\n        Swift: '#ffac45',\n        Kotlin: '#F18E33'\n    };\n\n    return colorMap[language] ||\n        `hsl(${Math.abs(language.split('').reduce((acc, char) => acc + char.charCodeAt(0), 0)) % 360}, 70%, 60%)`;\n};\n\n// 模拟数据，当API不可用时使用\nconst mockData = [\n    {\n        repo_id: 1,\n        name: 'react',\n        description: '用于构建用户界面的JavaScript库',\n        stars: 182000,\n        forks: 35800,\n        language: 'JavaScript',\n        owner: 'facebook',\n        stars_month_ago: 180000\n    },\n    {\n        repo_id: 2,\n        name: 'vue',\n        description: '渐进式JavaScript框架',\n        stars: 153000,\n        forks: 29500,\n        language: 'JavaScript',\n        owner: 'vuejs',\n        stars_month_ago: 151000\n    },\n    {\n        repo_id: 3,\n        name: 'tensorflow',\n        description: '机器学习框架',\n        stars: 147000,\n        forks: 83600,\n        language: 'Python',\n        owner: 'tensorflow',\n        stars_month_ago: 146000\n    },\n    {\n        repo_id: 4,\n        name: 'flutter',\n        description: 'Google的UI工具包，用于从单一代码库构建移动、Web和桌面应用',\n        stars: 139000,\n        forks: 21700,\n        language: 'Dart',\n        owner: 'flutter',\n        stars_month_ago: 137000\n    },\n    {\n        repo_id: 5,\n        name: 'vscode',\n        description: 'Visual Studio Code',\n        stars: 132000,\n        forks: 23800,\n        language: 'TypeScript',\n        owner: 'microsoft',\n        stars_month_ago: 130000\n    },\n    {\n        repo_id: 6,\n        name: 'kubernetes',\n        description: '容器编排系统',\n        stars: 126000,\n        forks: 45900,\n        language: 'Go',\n        owner: 'kubernetes',\n        stars_month_ago: 125000\n    }\n];\n\nconst TopRepositories = () => {\n    const [repositories, setRepositories] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n    const [sortBy, setSortBy] = useState('stars');\n    const [filter, setFilter] = useState('');\n    const [selectedLanguage, setSelectedLanguage] = useState('');\n    const [hoveredRepo, setHoveredRepo] = useState(null);\n    const [isUsingMockData, setIsUsingMockData] = useState(false);\n\n    useEffect(() => {\n        async function fetchData() {\n            try {\n                setLoading(true);\n                const response = await fetch(API.topRepositories);\n                if (!response.ok) throw new Error('获取数据失败');\n                const result = await response.json();\n                //console.log('API Result:', result);//打印API结果\n                setRepositories(result);\n                setIsUsingMockData(false);\n            } catch (err) {\n                console.error('获取最受欢迎仓库数据出错:', err);\n                // 使用模拟数据作为后备\n                setRepositories(mockData);\n                setIsUsingMockData(true);\n                setError(null); // 清除错误状态，因为我们使用了模拟数据\n            } finally {\n                setLoading(false);\n            }\n        }\n\n        fetchData();\n    }, []);\n\n    // 提取所有语言 (基于完整数据)\n    const availableLanguages = useMemo(() => {\n        const languages = new Set();\n        repositories.forEach(repo => {\n            if (repo.language) languages.add(repo.language);\n        });\n        return Array.from(languages).sort();\n    }, [repositories]);\n\n    // 计算七天内星标增长率 (需要更新以匹配后端更改)\n    const calculateGrowthRate = (repo) => {\n        // 使用后端返回的 'stars_7_days_ago' 字段\n        if (repo.stars_month_ago === null || repo.stars_month_ago === undefined || repo.stars_month_ago === 0) return 0; // 如果没有7天前数据或为0，则增长率为0\n        const growth = (repo.stars || 0) - repo.stars_month_ago;\n        // 避免除以零，如果7天前星标为0，增长率视为无限大或特殊值，这里简单处理为大幅增长或0\n        const baseStars = repo.stars_month_ago || 1; // 防止除以0\n        const rate = (growth / baseStars) * 100;\n        return rate.toFixed(1);\n    };\n\n    // 格式化数字\n    const formatNumber = (num) => {\n        if (num >= 1000000) {\n            return (num / 1000000).toFixed(1) + 'M';\n        } else if (num >= 1000) {\n            return (num / 1000).toFixed(1) + 'K';\n        }\n        return num ? num.toString() : '0';\n    };\n\n    // 步骤 1 & 2: 过滤（语言）和排序完整数据\n    const filteredSortedFullRepos = useMemo(() => {\n        let result = [...repositories];\n\n        // 按语言过滤\n        if (selectedLanguage) {\n            result = result.filter(repo => repo.language === selectedLanguage);\n        }\n\n        // 排序\n        return result.sort((a, b) => {\n            switch (sortBy) {\n                case 'stars':\n                    return (b.stars || 0) - (a.stars || 0);\n                case 'forks':\n                    return (b.forks || 0) - (a.forks || 0);\n                case 'recent_stars':\n                     // 使用 7 天增长率排序\n                    const growthA = calculateGrowthRate(a);\n                    const growthB = calculateGrowthRate(b);\n                    return growthB - growthA; // 按增长率降序\n                default:\n                    return (b.stars || 0) - (a.stars || 0);\n            }\n        });\n    }, [repositories, selectedLanguage, sortBy]); // 依赖项\n\n    // 步骤 3: 条件化搜索或切片\n    const displayedRepos = useMemo(() => {\n        const lowerFilter = filter.trim().toLowerCase(); // 获取搜索文本\n\n        // 如果没有搜索文本，应用语言和排序，然后取前30\n        if (!lowerFilter) {\n            return filteredSortedFullRepos.slice(0, 30);\n        }\n\n        // 如果有搜索文本，在已过滤排序的完整列表上执行搜索\n        const searchResults = filteredSortedFullRepos.filter(repo =>\n            repo.name.toLowerCase().includes(lowerFilter) ||\n            (repo.description && repo.description.toLowerCase().includes(lowerFilter)) ||\n             // 也可以搜索 owner\n             (repo.owner && repo.owner.toLowerCase().includes(lowerFilter))\n        );\n\n        // 返回所有搜索结果\n        return searchResults;\n\n    }, [filteredSortedFullRepos, filter]); // 依赖项\n\n    if (loading) {\n        return (\n            <div className=\"loading-container\">\n                <div className=\"spinner\"></div>\n                <div className=\"loading-text\">正在加载最受欢迎仓库数据...</div>\n            </div>\n        );\n    }\n\n    if (error && !isUsingMockData) {\n        return <div className=\"error-container\">错误: {error}</div>;\n    }\n\n    if (!repositories || repositories.length === 0) {\n        return <div className=\"empty-data\">没有找到仓库数据</div>;\n    }\n\n    return (\n        <div className=\"top-repositories-page\">\n            <h1 className=\"page-title\">最受欢迎仓库</h1>\n\n            {isUsingMockData && (\n                <div className=\"mock-data-notice\">\n                    注意：由于API不可用，当前显示的是模拟数据。\n                </div>\n            )}\n\n            <div className=\"top-repos-filters\">\n                <div className=\"filter-group\">\n                    <label htmlFor=\"sort-select\">排序方式:</label>\n                    <select\n                        id=\"sort-select\"\n                        value={sortBy}\n                        onChange={(e) => setSortBy(e.target.value)}\n                    >\n                        <option value=\"stars\">按星标数</option>\n                        <option value=\"forks\">按分叉数</option>\n                        <option value=\"recent_stars\">按最近增长</option>\n                    </select>\n                </div>\n\n                <div className=\"filter-group\">\n                    <label htmlFor=\"language-select\">编程语言:</label>\n                    <select\n                        id=\"language-select\"\n                        value={selectedLanguage}\n                        onChange={(e) => setSelectedLanguage(e.target.value)}\n                    >\n                        <option value=\"\">全部语言</option>\n                        {availableLanguages.map(lang => (\n                            <option key={lang} value={lang}>{lang}</option>\n                        ))}\n                    </select>\n                </div>\n\n                <div className=\"filter-group\">\n                    <label htmlFor=\"search-input\">搜索:</label>\n                    <input\n                        id=\"search-input\"\n                        type=\"text\"\n                        placeholder=\"搜索仓库名、描述或所有者\"\n                        value={filter}\n                        onChange={(e) => setFilter(e.target.value)}\n                    />\n                </div>\n            </div>\n\n            <div className=\"repositories-grid\">\n                {displayedRepos.length === 0 && !loading && (\n                    <div className=\"empty-data\">没有匹配当前条件的仓库</div>\n                )}\n                {displayedRepos.map((repo, index) => (\n                    <div\n                        key={repo.repo_id || index}\n                        className={`repository-card ${hoveredRepo === repo.repo_id ? 'hovered' : ''}`}\n                        onMouseEnter={() => setHoveredRepo(repo.repo_id)}\n                        onMouseLeave={() => setHoveredRepo(null)}\n                    >\n                        <div className=\"repository-rank\">{index + 1}</div>\n                        <div className=\"repository-header\">\n                            <h3 className=\"repository-name\">\n                                <a\n                                    href={repo.description || `https://github.com/${repo.url}/${repo.name}`}\n                                    target=\"_blank\"\n                                    rel=\"noopener noreferrer\"\n                                >\n                                    <span className=\"repository-owner\">{repo.url}/</span>\n                                    {repo.name}\n                                </a>\n                            </h3>\n                        </div>\n                        <div className=\"repository-description\">{repo.owner}</div>\n\n                        <div className=\"repository-meta\">\n                            {repo.language && (\n                                <div className=\"repository-language\">\n                                    <span\n                                        className=\"language-color\"\n                                        style={{ backgroundColor: getLanguageColor(repo.language) }}\n                                    ></span>\n                                    <span className=\"language-name\">{repo.language}</span>\n                                </div>\n                            )}\n\n                            <div className=\"repository-stats\">\n                                <div className=\"repository-stars\">\n                                    <svg className=\"icon\" viewBox=\"0 0 16 16\" fill=\"currentColor\">\n                                        <path d=\"M8 .25a.75.75 0 01.673.418l1.882 3.815 4.21.612a.75.75 0 01.416 1.279l-3.046 2.97.719 4.192a.75.75 0 01-1.088.791L8 12.347l-3.766 1.98a.75.75 0 01-1.088-.79l.72-4.194L.818 6.374a.75.75 0 01.416-1.28l4.21-.611L7.327.668A.75.75 0 018 .25z\" />\n                                    </svg>\n                                    <span title={`${(repo.stars || 0).toLocaleString()} 个星标`}>\n                                        {formatNumber(repo.stars)}\n                                    </span>\n                                </div>\n\n                                <div className=\"repository-forks\">\n                                    <svg className=\"icon\" viewBox=\"0 0 16 16\" fill=\"currentColor\">\n                                        <path d=\"M5 3.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm0 2.122a2.25 2.25 0 10-1.5 0v.878A2.25 2.25 0 005.75 8.5h1.5v2.128a2.251 2.251 0 101.5 0V8.5h1.5a2.25 2.25 0 002.25-2.25v-.878a2.25 2.25 0 10-1.5 0v.878a.75.75 0 01-.75.75h-4.5A.75.75 0 015 6.25v-.878zm3.75 7.378a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm3-8.75a.75.75 0 100-1.5.75.75 0 000 1.5z\" />\n                                    </svg>\n                                    <span title={`${(repo.forks || 0).toLocaleString()} 个分叉`}>\n                                        {formatNumber(repo.forks)}\n                                    </span>\n                                </div>\n\n                                {(repo.stars_7_days_ago !== null && repo.stars_7_days_ago !== undefined) && (\n                                    <div\n                                        className={`repository-growth ${calculateGrowthRate(repo) >= 0 ? 'positive' : 'negative'}`}\n                                        title={`过去7天星标增长 ${calculateGrowthRate(repo)}%`}\n                                    >\n                                        <svg className=\"icon\" viewBox=\"0 0 16 16\" fill=\"currentColor\">\n                                            <path fillRule=\"evenodd\" d=\"M8 12a.75.75 0 01-.75-.75V5.66L3.668 9.123a.75.75 0 11-1.036-1.086l5.25-5a.75.75 0 011.071 0l5.25 5a.75.75 0 11-1.036 1.086L8.75 5.66v5.59A.75.75 0 018 12z\" />\n                                        </svg>\n                                        <span>{calculateGrowthRate(repo)}%</span>\n                                    </div>\n                                )}\n                            </div>\n                        </div>\n                    </div>\n                ))}\n            </div>\n        </div>\n    );\n};\n\nexport default TopRepositories;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}